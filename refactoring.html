<!DOCTYPE html>
<html>
  <head>
    <title>Ben Christel - ES6</title>
    <meta charset="utf-8">
    <style>
      @import url(https://fonts.googleapis.com/css?family=Yanone+Kaffeesatz);
      @import url(https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic);
      @import url(https://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700,400italic);

      body { font-family: 'Droid Serif'; }
      h1, h2, h3 {
        font-family: 'Yanone Kaffeesatz';
        font-weight: normal;
      }
      .remark-code, .remark-inline-code { font-family: 'Ubuntu Mono'; }

      .remark-code {
        font-size: 24px;
        line-height: 125%;
      }

      .hljs-default .hljs {
        overflow: hidden;
      }
    </style>
  </head>
  <body>
    <textarea id="source">

class: middle

```javascript
function sortCustomersByName (customers) {
  customers.sort(function (a, b) {
    if (a.name > b.name) return 1
    if (a.name < b.name) return -1
    return 0
  })
}

function sortTransactionsByDate (transactions) {
  transactions.sort(function (a, b) {
    if (a.date > b.date) return 1
    if (a.date < b.date) return -1
    return 0
  })
}
```

---
class: middle

class: middle

```javascript
function compare (a, b) {
  if (a > b) return 1
  if (a < b) return -1
  return 0
}

function sortCustomersByName (customers) {
  customers.sort(function (a, b) {
    return compare(a.name, b.name)
  })
}

function sortTransactionsByDate (transactions) {
  transactions.sort(function (a, b) {
    return compare(a.date, b.date)
  })
}
```

---
class: middle

```javascript
function compare (a, b) {
  if (a > b) return 1
  if (a < b) return -1
  return 0
}

function makeComparator (property) {
  return function(a, b) {
    return compare(a[property], b[property])
  }
}

function sortCustomersByName (customers) {
  customers.sort(makeComparator('name'))
}

function sortTransactionsByDate (transactions) {
  transactions.sort(makeComparator('date'))
}
```

---
class: middle

```javascript
function makeComparator (property) {
  return function(a, b) {
    let aVal = a[property]
    let bVal = b[property]
    if (aVal > bVal) return 1
    if (aVal < bVal) return -1
    return 0
  }
}

function sortCustomersByName (customers) {
  customers.sort(makeComparator('name'))
}

function sortTransactionsByDate (transactions) {
  transactions.sort(makeComparator('date'))
}
```

---
class: middle

```javascript
function by (property) {
  return function(a, b) {
    let aVal = a[property]
    let bVal = b[property]
    if (aVal > bVal) return 1
    if (aVal < bVal) return -1
    return 0
  }
}

function sortCustomersByName (customers) {
  customers.sort(by('name'))
}

function sortTransactionsByDate (transactions) {
  transactions.sort(by('date'))
}
```

---
class: middle

```javascript
function by (property) {
  return function(a, b) {
    let aVal = a[property]
    let bVal = b[property]
    if (aVal > bVal) return 1
    if (aVal < bVal) return -1
    return 0
  }
}

// inlined
customers.sort(by('name'))

// inlined
transactions.sort(by('date'))
```

---
class: middle

```javascript
function by (getSortKey) {
  return function(a, b) {
    let aVal = getSortKey(a)
    let bVal = getSortKey(b)
    if (aVal > bVal) return 1
    if (aVal < bVal) return -1
    return 0
  }
}

function prop (propName) {
  return function (obj) {
    return obj[propName]
  }
}

// inlined
customers.sort(by(prop('name')))

// inlined
transactions.sort(by(prop('date')))
```

---
class: middle

```javascript
customers.map(prop('name'))
```

???

But now the PM comes to you and says, "we actually wanted the transactions in descending order by date, with the most recent first". 

---
class: middle

```javascript
function desc (comparator) {
  return function (a, b) {
    return -comparator(a, b)
  }
}
```

---
class: middle

```javascript
transactions.sort(desc(by(prop('date'))))
```

???

And now the parentheses look a little ugly but the PM's happy because you just shipped that fix in 5 minutes and you didn't have to change any existing code to do it.

---
class: middle

# Keep Calm and Obey Open-Closed

???

And this brings me to my final point which is that when you have these tiny, composable units of functionality, you actually can obey the open-closed principle in a way that would be really awkward to do with just OO.

---
class: middle


```javascript
let desc = comparator => (a, b) => 
  comparator(a, b)

let by = getSortKey => (a, b) => {
  let aVal = getSortKey(a)
  let bVal = getSortKey(b)
  if (aVal > bVal) return 1
  if (aVal < bVal) return -1
  return 0
}

let prop = propName => obj => 
  obj[propname]
```


    </textarea>
    <script src="https://gnab.github.io/remark/downloads/remark-latest.min.js">
    </script>
    <script>
      var slideshow = remark.create();
    </script>
  </body>
</html>
